<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><title>sap.FinancialDataCall</title><link rel="stylesheet" href="../../../../Style/Master.css" type="text/css"><script src="../../../../Scripts/jquery-1.9.1.js" type="text/javascript"></script><script src="../../../../Scripts/sections.js" type="text/javascript"></script></head><body><div id="wrap"><div id="container"><div id="header"><div id="breadcrumbs"><a href="../../../../index.html">Project</a> &gt; <a href="../../../../AMATSTSQL06A_TESTSQL2012/index.html">AMATSTSQL06A\TESTSQL2012</a> &gt; <a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/index.html">User databases</a> &gt; <a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/index.html">FARMS_LLS</a> &gt; <a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Tables/Tables.html">Tables</a> &gt; sap.FinancialDataCall</div><div id="headerText"></div></div><div id="pageTitle"><img src="../../../../Images/Table32.png" alt="Tables" title="Tables" class="Table32"> [sap].[FinancialDataCall]</div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="properties">Properties</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Property</th><th>Value</th></tr><tr><td>Collation</td><td>SQL_Latin1_General_CP1_CI_AS</td></tr><tr><td>Row Count (~)</td><td>65684</td></tr><tr><td>Created</td><td>5:50:59 PM Monday, 8 December 2014</td></tr><tr><td>Last Modified</td><td>11:10:40 AM Thursday, 12 March 2020</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="columns">Columns</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Key</th><th>Name</th><th>Data Type</th><th>Max Length (Bytes)</th><th>Nullability</th><th>Identity</th><th>Identity Replication</th></tr><tr><td><a href="#indexes"><img src="../../../../Images/pkcluster.png" alt="Cluster Primary Key PK_FinancialDataCall: Handle" title="Cluster Primary Key PK_FinancialDataCall: Handle" class="pkcluster"></a><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes missing_index_85_84_FinancialDataCall" title="Indexes missing_index_85_84_FinancialDataCall" class="Index"></a></td><td>Handle</td><td>int</td><td>4</td><td>NOT NULL</td><td>1 - 1</td><td><div class="tick"><span class="do-no">False</span></div></td></tr><tr><td><a href="#checkconstraints"><img src="../../../../Images/c-constraint.png" alt="Check Constraints CHK_FinancialDataServices_ServiceId : ([sap].[fn_CheckServiceId]([ServiceId])=(1))" title="Check Constraints CHK_FinancialDataServices_ServiceId : ([sap].[fn_CheckServiceId]([ServiceId])=(1))" class="c-constraint"></a></td><td>ServiceId</td><td>char(3)</td><td>3</td><td>NULL allowed</td><td></td><td></td></tr><tr><td></td><td>ClientConversationHandle</td><td>uniqueidentifier</td><td>16</td><td>NULL allowed</td><td></td><td></td></tr><tr><td></td><td>ServerConversationHandle</td><td>uniqueidentifier</td><td>16</td><td>NULL allowed</td><td></td><td></td></tr><tr><td><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes IX_FinancialDataCall_Initiated" title="Indexes IX_FinancialDataCall_Initiated" class="Index"></a></td><td>Initiated</td><td>datetime</td><td>8</td><td>NOT NULL</td><td></td><td></td></tr><tr><td></td><td>Started</td><td>datetime</td><td>8</td><td>NULL allowed</td><td></td><td></td></tr><tr><td><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes missing_index_85_84_FinancialDataCall" title="Indexes missing_index_85_84_FinancialDataCall" class="Index"></a></td><td>Finished</td><td>datetime</td><td>8</td><td>NULL allowed</td><td></td><td></td></tr><tr><td><a href="#indexes"><img src="../../../../Images/Index.png" alt="Indexes missing_index_85_84_FinancialDataCall" title="Indexes missing_index_85_84_FinancialDataCall" class="Index"></a></td><td>IsSuccess</td><td>bit</td><td>1</td><td>NULL allowed</td><td></td><td></td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="indexes">Indexes</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Key</th><th>Name</th><th>Key Columns</th><th>Included Columns</th><th>Unique</th></tr><tr><td><a href="#indexes"><img src="../../../../Images/pkcluster.png" alt="Cluster Primary Key PK_FinancialDataCall: Handle" title="Cluster Primary Key PK_FinancialDataCall: Handle" class="pkcluster"></a></td><td>PK_FinancialDataCall</td><td>Handle</td><td></td><td><div class="tick"><span class="do-yes">True</span></div></td></tr><tr><td></td><td>IX_FinancialDataCall_Initiated</td><td>Initiated</td><td></td><td></td></tr><tr><td></td><td>missing_index_85_84_FinancialDataCall</td><td>IsSuccess, Finished</td><td>Handle</td><td></td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="triggers">Triggers</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>ANSI Nulls On</th><th>Quoted Identifier On</th><th>On</th></tr><tr><td>trg_FinancialDataCall</td><td><div class="tick"><span class="do-yes">True</span></div></td><td><div class="tick"><span class="do-yes">True</span></div></td><td>After Delete</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="checkconstraints">Check Constraints</a></div><div class="panel-body"><table cellspacing="1" border="0" class="dataTable table-hover"><tbody><tr><th>Name</th><th>On Column</th><th>Constraint</th></tr><tr><td>CHK_FinancialDataServices_ServiceId</td><td>ServiceId</td><td>([sap].[fn_CheckServiceId]([ServiceId])=(1))</td></tr></tbody></table></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="sqlscript">SQL Script</a></div><div class="panel-body"><div id="sqlScript"><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span><br><span class="sqlScriptsOperator">(</span><br><span class="sqlScriptsNormal">[Handle]</span> <span class="sqlScriptsNormal">[int]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span> <span class="sqlScriptsKeyword">IDENTITY</span><span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">1</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">1</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsKeyword">FOR</span> <span class="sqlScriptsKeyword">REPLICATION</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[ServiceId]</span> <span class="sqlScriptsNormal">[char]</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">3</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">COLLATE</span> <span class="sqlScriptsNormal">SQL_Latin1_General_CP1_CI_AS</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[ClientConversationHandle]</span> <span class="sqlScriptsNormal">[uniqueidentifier]</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[ServerConversationHandle]</span> <span class="sqlScriptsNormal">[uniqueidentifier]</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[Initiated]</span> <span class="sqlScriptsNormal">[datetime]</span> <span class="sqlScriptsOperator">NOT</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[Started]</span> <span class="sqlScriptsNormal">[datetime]</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[Finished]</span> <span class="sqlScriptsNormal">[datetime]</span> <span class="sqlScriptsOperator">NULL</span><span class="sqlScriptsNormal">,</span><br><span class="sqlScriptsNormal">[IsSuccess]</span> <span class="sqlScriptsNormal">[bit]</span> <span class="sqlScriptsOperator">NULL</span><br><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsComment">/*<br> &nbsp;The trigger end conversation which was not finished for some reason.<br> &nbsp;It ends conversation for client side and even <br> &nbsp;&nbsp;&nbsp;if there is no server side conversation handle in a log record <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it finds it and closes server side conversation<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;If any conversation is still active the trigger disallows to delete it<br><br>*/</span><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">trigger</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[trg_FinancialDataCall]</span> <span class="sqlScriptsKeyword">on</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span> <span class="sqlScriptsKeyword">for</span> <span class="sqlScriptsKeyword">delete</span><br><span class="sqlScriptsKeyword">as</span><br> &nbsp;<span class="sqlScriptsKeyword">declare</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span> <span class="sqlScriptsKeyword">uniqueidentifier</span><span class="sqlScriptsNormal">,</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsKeyword">uniqueidentifier</span><span class="sqlScriptsNormal">,</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsNormal">@Handle</span> <span class="sqlScriptsKeyword">int</span><span class="sqlScriptsNormal">;</span> <br> &nbsp;<br> &nbsp;<span class="sqlScriptsKeyword">while</span> <span class="sqlScriptsNormal">1</span><span class="sqlScriptsOperator">=</span><span class="sqlScriptsNormal">1</span><br> &nbsp;<span class="sqlScriptsKeyword">begin</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsKeyword">top</span> <span class="sqlScriptsNormal">1</span> <span class="sqlScriptsNormal">@Handle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">Handle</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">ClientConversationHandle</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">ServerConversationHandle</span> <br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsNormal">deleted</span> <br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">Handle</span> <span class="sqlScriptsOperator">&gt;</span> <span class="sqlScriptsFunction">isNull</span><span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">@Handle</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">0</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">and</span> <span class="sqlScriptsNormal">IsSuccess</span> <span class="sqlScriptsOperator">is</span> <span class="sqlScriptsOperator">null</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">order</span> <span class="sqlScriptsKeyword">by</span> <span class="sqlScriptsNormal">Handle</span> <span class="sqlScriptsKeyword">asc</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">if</span> <span class="sqlScriptsFunction">@@ROWCOUNT</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">0</span> <span class="sqlScriptsKeyword">break</span><span class="sqlScriptsNormal">;</span><br> &nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">if</span> <span class="sqlScriptsOperator">exists</span><span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsOperator">*</span> <span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsSystemView">sys.conversation_endpoints</span> <span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">conversation_handle</span> <span class="sqlScriptsOperator">in</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">@ServerConversationHandle</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsOperator">and</span> <span class="sqlScriptsNormal">state</span> <span class="sqlScriptsOperator">not</span> <span class="sqlScriptsOperator">in</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsString">&#39;CD&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;ER&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;DI&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsString">&#39;DO&#39;</span><span class="sqlScriptsNormal">))</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">raiserror</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsString">&#39;There is an active conversation for handle %d. The sap.FinancialDataCall record can not be deleted&#39;</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">15</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">1</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">@Handle</span><span class="sqlScriptsOperator">)</span> &nbsp;&nbsp;&nbsp;<br><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">if</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span> <span class="sqlScriptsOperator">is</span> <span class="sqlScriptsOperator">not</span> <span class="sqlScriptsOperator">null</span> <span class="sqlScriptsOperator">and</span> <span class="sqlScriptsOperator">exists</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsOperator">*</span> <span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsSystemView">sys.conversation_endpoints</span> <span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">conversation_handle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">begin</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- retrieving server conversation handle from system view</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">if</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsOperator">is</span> <span class="sqlScriptsOperator">null</span><span class="sqlScriptsOperator">)</span> &nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">begin</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">conversation_handle</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsSystemView">sys.conversation_endpoints</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">conversation_handle</span> <span class="sqlScriptsNormal">&lt;&gt;</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsOperator">and</span> <span class="sqlScriptsNormal">conversation_id</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsNormal">conversation_id</span> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsSystemView">sys.conversation_endpoints</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">conversation_handle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">end</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- ending client conversation</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">end</span> <span class="sqlScriptsNormal">conversation</span> <span class="sqlScriptsNormal">@ClientConversationHandle</span> <span class="sqlScriptsKeyword">with</span> <span class="sqlScriptsNormal">cleanup</span><span class="sqlScriptsNormal">;</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">end</span> &nbsp;&nbsp;&nbsp;<br><br> &nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">if</span> <span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsOperator">is</span> <span class="sqlScriptsOperator">not</span> <span class="sqlScriptsOperator">null</span> <span class="sqlScriptsOperator">and</span> <span class="sqlScriptsOperator">exists</span> <span class="sqlScriptsOperator">(</span><span class="sqlScriptsKeyword">select</span> <span class="sqlScriptsOperator">*</span> <span class="sqlScriptsKeyword">from</span> <span class="sqlScriptsSystemView">sys.conversation_endpoints</span> <span class="sqlScriptsKeyword">where</span> <span class="sqlScriptsNormal">conversation_handle</span> <span class="sqlScriptsOperator">=</span> <span class="sqlScriptsNormal">@ServerConversationHandle</span><span class="sqlScriptsOperator">)</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsComment">-- ending server conversation</span><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sqlScriptsKeyword">end</span> <span class="sqlScriptsNormal">conversation</span> <span class="sqlScriptsNormal">@ServerConversationHandle</span> <span class="sqlScriptsKeyword">with</span> <span class="sqlScriptsNormal">cleanup</span><span class="sqlScriptsNormal">;</span><br> &nbsp;<span class="sqlScriptsKeyword">end</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[CHK_FinancialDataServices_ServiceId]</span> <span class="sqlScriptsKeyword">CHECK</span> <span class="sqlScriptsNormal">((</span><span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[fn_CheckServiceId]</span><span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[ServiceId]</span><span class="sqlScriptsNormal">)=(</span><span class="sqlScriptsNormal">1</span><span class="sqlScriptsNormal">)))</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">ALTER</span> <span class="sqlScriptsKeyword">TABLE</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span> <span class="sqlScriptsKeyword">ADD</span> <span class="sqlScriptsKeyword">CONSTRAINT</span> <span class="sqlScriptsNormal">[PK_FinancialDataCall]</span> <span class="sqlScriptsKeyword">PRIMARY</span> <span class="sqlScriptsKeyword">KEY</span> <span class="sqlScriptsKeyword">CLUSTERED</span> &nbsp;<span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[Handle]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">NONCLUSTERED</span> <span class="sqlScriptsKeyword">INDEX</span> <span class="sqlScriptsNormal">[IX_FinancialDataCall_Initiated]</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[Initiated]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br><span class="sqlScriptsKeyword">CREATE</span> <span class="sqlScriptsKeyword">NONCLUSTERED</span> <span class="sqlScriptsKeyword">INDEX</span> <span class="sqlScriptsNormal">[missing_index_85_84_FinancialDataCall]</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[sap]</span><span class="sqlScriptsOperator">.</span><span class="sqlScriptsNormal">[FinancialDataCall]</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[IsSuccess]</span><span class="sqlScriptsNormal">,</span> <span class="sqlScriptsNormal">[Finished]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">INCLUDE</span> <span class="sqlScriptsNormal">(</span><span class="sqlScriptsNormal">[Handle]</span><span class="sqlScriptsOperator">)</span> <span class="sqlScriptsKeyword">ON</span> <span class="sqlScriptsNormal">[PRIMARY]</span><br><span class="sqlScriptsNormal">GO</span><br></div></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="uses">Uses</a></div><div class="panel-body"><ul class="DependencyList"><li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Functions/Scalar-valued_Functions/fn_CheckServiceId.html">[sap].[fn_CheckServiceId]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Security/Schemas/sap.html">sap</a></li> </ul></div></div><div class="panel panel-default panel-collapsible"><div class="panel-heading"><div class="expandCollapse"><img src="../../../../Images/collapsed.png" alt="collapsed" title="collapsed" class="collapsed" style="display:none;"><img src="../../../../Images/expanded.png" alt="expanded" title="expanded" class="expanded" style=""></div><a name="usedby">Used By</a></div><div class="panel-body"><ul class="DependencyList"><li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Tables/BalanceCallParameters.html">[sap].[BalanceCallParameters]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Tables/DetailedBalanceCallParameters.html">[sap].[DetailedBalanceCallParameters]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Tables/FinancialSyncLog.html">[sap].[FinancialSyncLog]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Views/FinancialLogView.html">[sap].[FinancialLogView]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/FinancialDataWorker_CleanCache.html">[sap].[FinancialDataWorker_CleanCache]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/FinancialDataWorker_CleanLog.html">[sap].[FinancialDataWorker_CleanLog]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/FinancialDataWorker_Commit.html">[sap].[FinancialDataWorker_Commit]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/FinancialDataWorker_NextQueueItem.html">[sap].[FinancialDataWorker_NextQueueItem]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/GetBalanceHandle.html">[sap].[GetBalanceHandle]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/GetDetailedBalanceHandle.html">[sap].[GetDetailedBalanceHandle]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/InitiateCall.html">[sap].[InitiateCall]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Stored_Procedures/WaitForData.html">[sap].[WaitForData]</a></li> <li><a href="../../../../AMATSTSQL06A_TESTSQL2012/User_databases/FARMS_LLS/Programmability/Functions/Table-valued_Functions/ifn_FinancialDataHandleInfo.html">[sap].[ifn_FinancialDataHandleInfo]</a></li> </ul></div></div></div></div><div id="footer"><div class="row"><div id="customtext" class="col-sm-4"><div id="projectauthor">Author: &nbsp;Meiling Chen</div></div><div id="copyright" class="col-sm-4">Copyright 2025 - All Rights Reserved</div><div id="date" class="col-sm-4">Created: Monday, 20 October 2025 2:52:29 PM</div></div></div></body></html>